---
import Layout from "../../layouts/Layout.astro";
import Nav from "../../components/NavBarStudent.astro";
import SearchR from "../../components/SearchBox.astro";
import SLoans from "../../components/SLoans.svelte";
import { GET, STUDENT_LOAN } from "../../API/API.json";
import type { StudentLoans } from "../../types/api";

let loans: StudentLoans | undefined = undefined;
const token = Astro.cookies.get("token");
if (token) {
    loans = (await GET(STUDENT_LOAN, token.value)) as StudentLoans;
} else return Astro.redirect("/");
if (Astro.request.method == "POST") {
    console.log(await Astro.request.text());
}
---

<Layout title="prestamo">
    <Nav />
    <SearchR>
        <SLoans s_loans={loans} client:visible />
    </SearchR>
</Layout>

<style>
    span {
        background-color: #32253f;
    }
</style>
